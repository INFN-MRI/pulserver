Traceback (most recent call last):
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/nbclient/client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/jupyter_core/utils/__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# create excitation and slice rephasing blocks
exc_block, slice_reph_block = pulserver.blocks.make_slr_pulse(
    system_limits, flip_angle, slice_thickness
)

# create phase encoding gradient, readout pre-/re-winder and readout/adc blocks:
phase_enc = pulserver.blocks.make_phase_encoding("y", system_limits, fov, matrix_size)
readout_block, readout_prewind_block = pulserver.blocks.make_line_readout(
    system_limits, fov, matrix_size
)

# create combined phase encoding + readout prewinder block
phase_enc_block = {"gy": phase_enc, **readout_prewind_block}

# create spoiling block
spoil_block = {
    "gz": pulserver.blocks.make_spoiler_gradient(
        "z", system_limits, ncycles=4, voxel_size=fov / matrix_size
    )
}
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mAssertionError[0m                            Traceback (most recent call last)
Cell [0;32mIn[5], line 8[0m
[1;32m      6[0m [38;5;66;03m# create phase encoding gradient, readout pre-/re-winder and readout/adc blocks:[39;00m
[1;32m      7[0m phase_enc [38;5;241m=[39m pulserver[38;5;241m.[39mblocks[38;5;241m.[39mmake_phase_encoding([38;5;124m"[39m[38;5;124my[39m[38;5;124m"[39m, system_limits, fov, matrix_size)
[0;32m----> 8[0m readout_block, readout_prewind_block [38;5;241m=[39m [43mpulserver[49m[38;5;241;43m.[39;49m[43mblocks[49m[38;5;241;43m.[39;49m[43mmake_line_readout[49m[43m([49m
[1;32m      9[0m [43m    [49m[43msystem_limits[49m[43m,[49m[43m [49m[43mfov[49m[43m,[49m[43m [49m[43mmatrix_size[49m
[1;32m     10[0m [43m)[49m
[1;32m     12[0m [38;5;66;03m# create combined phase encoding + readout prewinder block[39;00m
[1;32m     13[0m phase_enc_block [38;5;241m=[39m {[38;5;124m"[39m[38;5;124mgy[39m[38;5;124m"[39m: phase_enc, [38;5;241m*[39m[38;5;241m*[39mreadout_prewind_block}

File [0;32m/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/pulserver/blocks/_readout/_make_line_readout.py:106[0m, in [0;36mmake_line_readout[0;34m(system, fov, npix, osf, has_adc, flyback, ndim)[0m
[1;32m    103[0m adc_duration [38;5;241m=[39m npix [38;5;241m*[39m dwell
[1;32m    105[0m [38;5;66;03m# frequency encoding gradients[39;00m
[0;32m--> 106[0m gread [38;5;241m=[39m [43mpp[49m[38;5;241;43m.[39;49m[43mmake_trapezoid[49m[43m([49m
[1;32m    107[0m [43m    [49m[38;5;124;43m"[39;49m[38;5;124;43mx[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[43mflat_area[49m[38;5;241;43m=[39;49m[43mnpix[49m[43m [49m[38;5;241;43m*[39;49m[43m [49m[43mdk[49m[43m,[49m[43m [49m[43mflat_time[49m[38;5;241;43m=[39;49m[43madc_duration[49m[43m,[49m[43m [49m[43msystem[49m[38;5;241;43m=[39;49m[43msystem[49m
[1;32m    108[0m [43m[49m[43m)[49m
[1;32m    110[0m [38;5;66;03m# prepare prephaser/rephaser gradient lobe[39;00m
[1;32m    111[0m gphase [38;5;241m=[39m pp[38;5;241m.[39mmake_trapezoid([38;5;124m"[39m[38;5;124mx[39m[38;5;124m"[39m, area[38;5;241m=[39m[38;5;241m-[39mgread[38;5;241m.[39marea [38;5;241m/[39m [38;5;241m2[39m, system[38;5;241m=[39msystem)

File [0;32m/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/pypulseq/make_trapezoid.py:209[0m, in [0;36mmake_trapezoid[0;34m(channel, amplitude, area, delay, duration, fall_time, flat_area, flat_time, max_grad, max_slew, rise_time, system)[0m
[1;32m    205[0m     [38;5;28;01melse[39;00m:
[1;32m    206[0m         [38;5;66;03m# Find the shortest possible duration.           [39;00m
[1;32m    207[0m         amplitude2, rise_time, flat_time, fall_time [38;5;241m=[39m calculate_shortest_params_for_area(area, max_slew, max_grad, system[38;5;241m.[39mgrad_raster_time)
[0;32m--> 209[0m [38;5;28;01massert[39;00m [38;5;28mabs[39m(amplitude2) [38;5;241m<[39m[38;5;241m=[39m max_grad, (
[1;32m    210[0m     [38;5;124mf[39m[38;5;124m"[39m[38;5;124mRefined amplitude ([39m[38;5;132;01m{[39;00m[38;5;28mabs[39m(amplitude2)[38;5;132;01m:[39;00m[38;5;124m0.0f[39m[38;5;132;01m}[39;00m[38;5;124m Hz/m) is larger than max ([39m[38;5;132;01m{[39;00mmax_grad[38;5;132;01m:[39;00m[38;5;124m0.0f[39m[38;5;132;01m}[39;00m[38;5;124m Hz/m).[39m[38;5;124m"[39m)
[1;32m    212[0m grad [38;5;241m=[39m SimpleNamespace()
[1;32m    213[0m grad[38;5;241m.[39mtype [38;5;241m=[39m [38;5;124m"[39m[38;5;124mtrap[39m[38;5;124m"[39m

[0;31mAssertionError[0m: Refined amplitude (39062500 Hz/m) is larger than max (1490160 Hz/m).

